# BhashaQuest Refactoring Plan - Final Submission

**Source:** `ClaudeWorkDirectory/7807/BhashaQuestv2/BhashaQuest`
**Destination:** `ClaudeWorkDirectory/2783/BhashaQuestV3`
**Phase:** Final Refactoring & Cleanup for Submission
**Timeline:** 6 Tasks × 3 Subtasks each (18 subtasks total)

---

## Executive Summary

This refactoring plan aims to clean up, organize, and polish the BhashaQuest project for final submission. The project is feature-complete (~90%) but needs standardization, documentation, cleanup of temporary files, and final optimizations. Always follow SOLID, DRY, YAGNI, and KISS principles.

**Current State:**
- ✅ All core features implemented (Domain, Controller, Data, UI)
- ✅ 3 exercise types working (MCQ, Translate, TileOrder)
- ✅ 3 design patterns implemented (Factory, Strategy, Singleton)
- ⚠️ Some UI components need polishing
- ⚠️ Inconsistent file structure and documentation
- ⚠️ Manual testing only; no automated test suite
- ⚠️ Build artifacts not excluded from version control

---

## Task Structure (6×3 Format)

### Task 1: Code Organization & Structure Cleanup
Reorganize project layout, standardize file naming, and create consistent directory structure for final submission.

#### Subtask 1.1: Standardize Directory Structure
- Organize source files with clear separation: `src/core/domain`, `src/core/controllers`, `src/core/data`, `src/ui`
- Create `include/` directory for public headers (optional but recommended for larger projects)
- Add `.gitignore` entries: `build/`, `*.o`, `.qtcreator/`, `*.user`
- Verify all relative paths in the .pro file work correctly

#### Subtask 1.2: Standardize File Naming & Code Formatting
- Ensure all header files (.h) and implementation files (.cpp) follow naming convention: `ClassName.h/cpp`
- Verify class names match file names exactly (case-sensitive)
- Format all code consistently: 4-space indentation, consistent brace placement
- Remove trailing whitespace and standardize line endings (LF)
- Ensure all includes are in correct order: system headers, Qt headers, project headers

#### Subtask 1.3: Remove Temporary & Generated Files
- Clean up `build/` directory completely
- Remove `.qtcreator/` metadata directory
- Delete `.user` files (Qt Creator project configuration)
- Clean up any `.o` or object files
- Ensure `moc_*.cpp` and `ui_*.h` files are not committed (generated by build system)

---

### Task 2: Build System Standardization
Standardize and simplify the build configuration for consistency and ease of use, using qmake as the sole build system.

#### Subtask 2.1: Audit & Update Qt Creator Project File (BhashaQuest.pro)
- Verify BhashaQuest.pro includes all source files, using variables to group files for maintainability.
- Ensure Qt6 configuration is correct: `QT += core gui multimedia`
- Update CONFIG settings for production build: `CONFIG += c++17 release`
- Add compiler warnings: `QMAKE_CXXFLAGS += -Wall -Wextra`
- Verify asset paths (audio files, JSON) are correctly specified using `DISTFILES`.
- Test build: Open in Qt Creator, configure with Qt6 kit, build (Ctrl+B)

#### Subtask 2.2: Create Build Instructions & Troubleshooting
- Update README.md with clear build steps using Qt Creator and qmake from the command line.
- Add system requirements: Qt6 version, C++ standard.
- Include troubleshooting section for common build errors.
- Add instructions for cleaning build artifacts.

#### Subtask 2.3: Remove Obsolete Build Files
- Delete the `CMakeLists.txt` file from the project root.
- Ensure no other CMake-related files or build artifacts remain in the repository.

---

### Task 3: Code Documentation & Comments
Add comprehensive documentation explaining architecture, patterns, and complex logic.

#### Subtask 3.1: Document Design Patterns & Architecture
- Add detailed comments in ExerciseFactory explaining Factory Pattern implementation
- Add comments in StrategyGrader hierarchy explaining Strategy Pattern usage
- Add comments in AudioManager explaining Singleton Pattern
- Create architecture documentation in ARCHITECTURE.md explaining layer separation
- Document data flow: UI → Controller → Domain → Data in clear diagrams

#### Subtask 3.2: Add Method-Level Documentation
- Add Doxygen-style comments to all public methods in domain classes
- Document parameters, return values, and exceptions for AppController methods
- Add comments explaining non-obvious algorithm logic (e.g., Levenshtein distance in TranslateGrader)
- Document SRSScheduler review interval logic (Easy→7d, Medium→3d, Hard→1d)
- Add usage examples in comments for complex methods

#### Subtask 3.3: Create DEVELOPER_GUIDE.md
- Document how to add new exercise types (step-by-step guide)
- Explain how to extend grading strategies
- Document JSON content schema with examples for each exercise type
- Provide debugging tips and common issues
- Include links to relevant Qt6 documentation

---

### Task 4: User Interface Polish & Consistency
Improve UI visuals, fix layout issues, and ensure consistent styling across views.

#### Subtask 4.1: Fix Layout & Responsiveness Issues
- Test all UI views at different window sizes (1024×768, 1920×1080, etc.)
- Fix any stretched or misaligned widgets in LessonView
- Ensure buttons are consistently sized across all views
- Verify progress bar layout in LessonView is properly proportioned
- Test ProfileView scroll behavior with many skills

#### Subtask 4.2: Create and Apply UI Style Guide
- Create a `STYLE_GUIDE.md` in the `report/` directory.
- Define a consistent color palette: primary green (#4CAF50), accent blue (#2196F3), error red (#F44336).
- Define standard font sizes: titles (18pt), body (12pt), labels (11pt).
- Apply this styling consistently across all UI components.
- Test contrast ratios for readability (WCAG AA compliance).

#### Subtask 4.3: Improve User Feedback & Error Handling
- Add visual feedback for all user actions (button press animations, progress updates)
- Implement proper error messages for missing audio files or content.json errors
- Add loading indicators during content loading
- Implement graceful degradation if audio files are missing
- Add validation for user input with helpful error messages

---

### Task 5: Asset Organization & Resource Management
Organize audio files, images, and other resources for clean deployment.

#### Subtask 5.1: Organize Audio Assets
- Create structured audio directory: `assets/audio/{exercise-type}/{skill-id}/`
- Verify all referenced audio files in content.json exist and have correct paths
- Check audio file formats and quality (recommend MP3 or WAV)
- Ensure audio files are within reasonable size limits
- Document audio asset naming convention

#### Subtask 5.2: Create Placeholder Assets
- Generate or obtain placeholder audio files for all exercises in content.json
- Add short success/error sound effects for feedback
- Ensure audio paths in content.json match file locations
- Test audio playback in running application
- Document where to obtain production-quality audio

#### Subtask 5.3: Set Up Asset Deployment
- Verify the .pro file copies assets to the build directory correctly (e.g., using a custom build step).
- Test that the built executable can locate assets relative to its path.
- Create a deployment checklist for assets.
- Document how to package the application with all assets.

---

### Task 6: Final Documentation & Submission Preparation
Create a comprehensive submission package with all necessary documentation and deliverables.

#### Subtask 6.1: Update README.md & Create Submission Package
- Rewrite README.md with project overview, features, and build instructions.
- Add system requirements and installation steps.
- Include project structure explanation.
- Add links to all documentation files (ARCHITECTURE.md, DEVELOPER_GUIDE.md, etc.).
- Create a submission checklist: code compiles, documentation is complete.

#### Subtask 6.2: Create Architecture & Design Documentation
- Generate or update a class diagram (UML) showing all classes and relationships.
- Create a sequence diagram for the "Complete Exercise" flow.
- Document the architecture with a layered diagram (UI → Controller → Domain → Data).
- Explain each design pattern with code references.
- Add rationale for architectural decisions.

#### Subtask 6.3: Final Code Review & Optimization
- Review all files for code quality, readability, and consistency.
- Check for memory leaks or dangling pointers.
- Optimize hot paths if performance issues are identified.
- Remove dead code and commented-out sections.
- Do a final verification: the application builds cleanly and runs without errors.

---

## Task Dependencies & Sequence

### Recommended Order of Execution:

1. **Task 1** (Code Organization) - Foundation for everything else
2. **Task 2** (Build System) - Ensures a clean build
3. **Task 3** (Documentation) - Can be done in parallel with Tasks 4-5
4. **Task 4** (UI Polish) - Polish the user experience
5. **Task 5** (Assets) - Organize resources
6. **Task 6** (Final Submission) - Package everything

**Parallel Work Possible:**
- Tasks 3, 4, and 5 can be done in parallel after Task 1 is complete.
- Task 2 should be completed before Task 5 (to ensure proper asset copying).

---

## Success Criteria

Each task is considered **complete** when:

### Task 1 ✅
- [ ] Directory structure is clean and consistent
- [ ] All files follow naming conventions
- [ ] .gitignore properly excludes build artifacts
- [ ] Project can be cloned fresh and built without issues

### Task 2 ✅
- [ ] BhashaQuest.pro builds in Qt Creator without errors
- [ ] The executable runs successfully after the build
- [ ] All dependencies are clearly documented
- [ ] CMake files are removed

### Task 3 ✅
- [ ] All public classes have documentation
- [ ] Design patterns are clearly explained in code comments
- [ ] ARCHITECTURE.md exists and is comprehensive
- [ ] DEVELOPER_GUIDE.md provides clear instructions for extension

### Task 4 ✅
- [ ] All UI views look polished and consistent
- [ ] UI is responsive at different window sizes
- [ ] STYLE_GUIDE.md exists and is applied
- [ ] User feedback is immediate and clear

### Task 5 ✅
- [ ] Audio assets are organized and accessible
- [ ] All content.json references point to existing files
- [ ] Assets deploy correctly with the build
- [ ] Asset documentation is clear

### Task 6 ✅
- [ ] README.md is comprehensive and current
- [ ] Architecture diagrams are accurate and clear
- [ ] All documentation files exist and are linked
- [ ] The project is ready for final submission

---

## Tools & Technologies Required

- **Build System:** Qt Creator 12+ (with qmake)
- **Version Control:** Git (for cleanup operations)
- **Documentation:** Markdown, Doxygen (optional)
- **Visualization:** Draw.io or similar for diagrams

---

## Estimated Effort

- **Per Subtask:** 60-90 minutes
- **Total Time:** ~18-27 hours for all 18 subtasks
- **Parallelizable:** Yes - multiple subtasks can be done simultaneously after Task 1.

---

## Files to Create/Update

### New Files:
- `ARCHITECTURE.md` - Architecture and design explanation
- `DEVELOPER_GUIDE.md` - Developer guidelines and extension instructions
- `report/STYLE_GUIDE.md` - UI style guide
- `.gitignore` - Version control exclusions

### Modified Files:
- `README.md` - Comprehensive project documentation
- `BhashaQuest.pro` - Qt project file updates
- All source files - Add documentation comments

### Removed/Cleaned:
- `CMakeLists.txt`
- `build/` directory (temporary)
- `.qtcreator/` directory
- `*.user` files
- Generated `moc_*.cpp` and `ui_*.h` files

---

## Post-Refactoring Checklist

- [ ] Code compiles without warnings (with `-Wall -Wextra`)
- [ ] Application runs without errors
- [ ] All UI views display correctly
- [ ] Audio assets load and play
- [ ] Documentation is complete and accurate
- [ ] Directory structure is clean and logical
- [ ] `.gitignore` properly configured
- [ ] Submission package ready

---

## Notes for Claude Code

This plan is designed to be executed with **ClaudeCodeHaiku** - each subtask is scoped to be completable in a single session. When you receive subtasks:

1. Read the CLAUDE.md file in the destination folder
2. Follow the project's Git workflow
3. Create feature branches for each subtask: `git checkout -b refactor/task-X-subtask-Y`
4. Commit frequently with clear messages
5. Create pull requests when subtasks are complete
6. Update this plan if dependencies or requirements change

---

## Questions to Answer During Execution

- **Asset Format:** Should audio be MP3 or WAV? (Recommend MP3 for size efficiency)
- **Submission Format:** Single folder or separate code/report/video structure?
- **Documentation Style:** Markdown only or include Doxygen comments? (Recommend both)

---

## Submission Deliverables (After Refactoring)

```
BhashaQuestV3/
├── src/                           # Clean, organized source code
│   ├── core/domain/              # Domain files
│   ├── core/controllers/         # AppController
│   ├── core/data/               # ContentRepository + content.json
│   └── ui/                       # UI components
├── assets/                        # Organized audio files
├── report/                       # Diagrams and documentation
│   ├── STYLE_GUIDE.md
│   ├── design_rationale.pdf
│   ├── class_diagram.pdf
│   ├── sequence_diagram.pdf
│   └── architecture_diagram.pdf
├── BhashaQuest.pro              # Updated Qt project
├── README.md                    # Comprehensive README
├── ARCHITECTURE.md              # Architecture docs
├── DEVELOPER_GUIDE.md           # Extension guidelines
└── .gitignore                   # Proper exclusions
```

---

**Prepared:** 2025-11-10
**Target Completion:** After all 6 tasks × 3 subtasks completed
**Submission Ready:** Upon Task 6 completion